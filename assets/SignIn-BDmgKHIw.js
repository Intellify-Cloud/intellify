import{a as _}from"./api-BnXUZWSM.js";import{h as k,C as b,r,D as C,E as $,j as l,v as A,m as g,l as d,k as i,x as m,u as n,F as B,G as I,H as O,s as S,I as U,A as e}from"./index-CH54uvxX.js";const j={class:"b-form b-form--sm px-5 pt-6 my-32"},E={key:1,class:"flex flex-col gap-2 justify-start"},H=["innerHTML"],D=k({__name:"SignIn",setup(L){const{t:c}=b({useScope:"global"}),f=r(!1),v=r(!1),u=r(!1),o=r([]),y=async s=>{f.value=!0;try{const a=encodeURIComponent(`${window.location.protocol}//${window.location.hostname}${window.location.port?":"+window.location.port:""}/oauth`),p=await _.get(`v1/oauth/authenticate/${s}?redirectUri=${a}`);window.location.replace(p?.data?.authorizationUrl)}finally{f.value=!1}},w=async()=>{u.value=!0;try{const s=await _.get("v1/oauth/providers");o.value=s?.data,v.value=o.value.length==0}catch{O().add({message:c("exceptions.oauth-providers"),type:"error",name:"oauth-provider-error"})}finally{u.value=!1}};return C(async()=>{$.isOk()&&await w()}),(s,a)=>{const p=m("b-title"),h=m("v-alert"),x=m("v-btn");return e(),l("div",j,[A(p,{title:s.$t("sign-in"),class:"border-b"},null,8,["title"]),a[0]||(a[0]=g("div",{class:"h-2"},null,-1)),n(u)?(e(),d(h,{key:0,text:n(c)("messages.fetching-oauth-providers"),class:"align-middle text-center"},null,8,["text"])):i("",!0),n(o).length>0?(e(),l("div",E,[(e(!0),l(B,null,I(n(o),t=>(e(),d(x,{key:t.name,alt:`${t.name} logo`,class:"py-8 px-4 flex flex-row justify-center items-center gap-2 w-full",onClick:M=>y(t.name)},{default:S(()=>[t.svg?(e(),l("div",{key:0,innerHTML:t.svg,class:"v-icon__svg w-8 h-8 mr-4"},null,8,H)):i("",!0),g("span",null,U(t.name),1)]),_:2},1032,["alt","onClick"]))),128))])):i("",!0),n(v)?(e(),d(h,{key:2,type:"error",text:n(c)("exceptions.oauth-provider-error")},null,8,["text"])):i("",!0)])}}});export{D as default};
